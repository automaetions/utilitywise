<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UtilityWise Energy Analyzer</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --green:#4CD137;
  --green-hover:#2ECC71;
  --red:#E53935;
  --amber:#FFB300;
  --navy1:#0B1F3A;
  --navy2:#123B63;
}

*{box-sizing:border-box;}

body{
  margin:0;
  font-family:'Inter',sans-serif;
  background:linear-gradient(135deg,var(--navy1),var(--navy2));
}

h1{
  text-align:center;
  color:white;
  margin:20px 0;
}

.container{
  max-width:1100px;
  margin:auto;
  padding:15px;
}

.card{
  background:white;
  border-radius:16px;
  padding:20px;
  margin-bottom:20px;
}

label{
  font-size:13px;
  font-weight:600;
}

input{
  width:100%;
  padding:8px;
  margin-top:6px;
  margin-bottom:12px;
  border-radius:8px;
  border:1px solid #ddd;
}

button{
  cursor:pointer;
  border-radius:8px;
  border:none;
  padding:8px 12px;
  font-weight:600;
}

.primary-btn{
  background:linear-gradient(135deg,var(--green),var(--green-hover));
  color:white;
  width:100%;
  padding:12px;
}

.add-btn{
  border:2px solid var(--green);
  background:transparent;
  color:var(--green);
  width:100%;
  margin-top:10px;
}

.remove-btn{
  background:var(--red);
  color:white;
}

table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}

th,td{
  padding:8px;
  text-align:center;
  border-bottom:1px solid #eee;
}

th{
  background:#f7f9fb;
}

.dashboard .metrics{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:12px;
  margin-bottom:15px;
}

.metric{
  background:#f4f7fb;
  padding:12px;
  border-radius:10px;
}

.metric strong{
  display:block;
  font-size:16px;
}

.green{color:var(--green);}
.amber-row{background:#fff7df;}

.badge{
  display:inline-block;
  padding:4px 8px;
  background:var(--amber);
  border-radius:6px;
  font-size:12px;
  font-weight:600;
}

.sticky-summary{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  background:white;
  border-top:2px solid var(--green);
  padding:8px;
  display:flex;
  justify-content:space-around;
  font-size:13px;
  font-weight:600;
}

.search-box{
  position:relative;
}

.suggestions{
  position:absolute;
  background:white;
  width:100%;
  border:1px solid #ddd;
  border-radius:8px;
  max-height:150px;
  overflow:auto;
  z-index:5;
}

.suggestions div{
  padding:8px;
  cursor:pointer;
}

.suggestions div:hover{
  background:#f0f0f0;
}
</style>
</head>

<body>

<h1>UtilityWise Energy Analyzer</h1>

<div class="container">

<div class="card">
<label>Electricity Rate (₱ per kWh)</label>
<input type="number" id="rate" placeholder="Example: 13">

<div class="search-box">
<label>Search Appliance</label>
<input type="text" id="search" placeholder="Start typing appliance...">
<div id="suggestions" class="suggestions"></div>
</div>

<table>
<thead>
<tr>
<th>Appliance</th>
<th>W</th>
<th>Qty</th>
<th>Hrs</th>
<th>Days</th>
<th>Weeks</th>
<th>Reduce</th>
<th></th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>

<button class="add-btn" onclick="addRow()">+ Add Appliance</button>
<button class="primary-btn" onclick="calculate()">Analyze Energy</button>
</div>

<div id="dashboard" class="card dashboard" style="display:none;"></div>

</div>

<div class="sticky-summary" id="summary">
<span>Monthly ₱0</span>
<span>Yearly ₱0</span>
<span class="green">Savings ₱0</span>
</div>

<script>

const db=[
{name:"Air Conditioner 1HP",watts:900},
{name:"Air Conditioner 1.5HP",watts:1200},
{name:"Refrigerator Small",watts:150},
{name:"Refrigerator Large",watts:300},
{name:"Electric Fan",watts:75},
{name:"LED TV",watts:120},
{name:"Rice Cooker",watts:1000},
{name:"Washing Machine",watts:500},
{name:"Microwave",watts:1100},
{name:"Electric Kettle",watts:1500}
];

const tbody=document.getElementById("tbody");

function addRow(name="",watts=""){
let tr=document.createElement("tr");
tr.innerHTML=`
<td><input value="${name}"></td>
<td><input type="number" value="${watts}"></td>
<td><input type="number" value="1"></td>
<td><input type="number" value="1"></td>
<td><input type="number" value="7"></td>
<td><input type="number" value="4"></td>
<td><input type="number" value="0"></td>
<td><button class="remove-btn" onclick="this.closest('tr').remove();calculate()">X</button></td>
`;
tbody.appendChild(tr);
}

addRow();

function format(n){
return "₱"+n.toLocaleString("en-PH",{minimumFractionDigits:2});
}

function calculate(){
let rate=parseFloat(document.getElementById("rate").value)||0;
let rows=tbody.querySelectorAll("tr");

let totalMonthly=0;
let totalReduced=0;
let appliances=[];

rows.forEach(r=>{
let i=r.querySelectorAll("input");
let name=i[0].value;
let w=parseFloat(i[1].value)||0;
let qty=parseFloat(i[2].value)||0;
let hrs=parseFloat(i[3].value)||0;
let days=parseFloat(i[4].value)||0;
let weeks=parseFloat(i[5].value)||0;
let red=parseFloat(i[6].value)||0;

let monthly=(w/1000)*hrs*days*weeks*qty*rate;
let reduced=(w/1000)*Math.max(hrs-red,0)*days*weeks*qty*rate;

totalMonthly+=monthly;
totalReduced+=reduced;

appliances.push({name,monthly});
});

let yearly=totalMonthly*12;
let newYearly=totalReduced*12;
let savings=yearly-newYearly;
let savingsPercent=yearly>0?(savings/yearly*100):0;

appliances.sort((a,b)=>b.monthly-a.monthly);

let biggest=appliances.length?appliances[0].name:"-";

document.getElementById("summary").innerHTML=`
<span>Monthly ${format(totalMonthly)}</span>
<span>Yearly ${format(yearly)}</span>
<span class="green">Savings ${format(savings)}</span>
`;

let dash=document.getElementById("dashboard");
dash.style.display="block";
dash.innerHTML=`
<div class="metrics">
<div class="metric"><small>Monthly</small><strong>${format(totalMonthly)}</strong></div>
<div class="metric"><small>Yearly</small><strong>${format(yearly)}</strong></div>
<div class="metric"><small>New Yearly</small><strong>${format(newYearly)}</strong></div>
<div class="metric"><small>Savings</small><strong class="green">${format(savings)}</strong></div>
<div class="metric"><small>Savings %</small><strong class="green">${savingsPercent.toFixed(1)}%</strong></div>
<div class="metric"><small>Biggest Drain</small><strong><span class="badge">${biggest}</span></strong></div>
</div>
`;
}

document.getElementById("search").addEventListener("input",function(){
let value=this.value.toLowerCase();
let box=document.getElementById("suggestions");
box.innerHTML="";
if(!value)return;

db.filter(a=>a.name.toLowerCase().includes(value))
.forEach(a=>{
let div=document.createElement("div");
div.textContent=a.name+" ("+a.watts+"W)";
div.onclick=function(){
addRow(a.name,a.watts);
box.innerHTML="";
document.getElementById("search").value="";
};
box.appendChild(div);
});
});

</script>
</body>
</html>
