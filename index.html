<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UtilityWise Smart Energy Analyzer</title>

<style>
body {
    font-family: Arial, sans-serif;
    background-color: #0B2A4A;
    color: white;
    margin: 0;
    padding: 20px;
}

h1 {
    text-align: center;
    color: #2EA3F2;
}

.container {
    max-width: 1100px;
    margin: auto;
}

select, input[type=number] {
    width: 100%;
    padding: 6px;
}

input[type=range] {
    width: 100%;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background: white;
    color: black;
}

th, td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: center;
}

th {
    background-color: #2EA3F2;
    color: white;
}

button {
    background-color: #C62828;
    color: white;
    padding: 12px 25px;
    border: none;
    cursor: pointer;
    margin-top: 20px;
    font-size: 16px;
}

.dashboard {
    background: white;
    color: black;
    padding: 20px;
    margin-top: 30px;
    border-radius: 8px;
}

.highlight {
    background-color: #ffe082;
}
</style>
</head>

<body>

<div class="container">

<h1>UtilityWise Smart Energy Analyzer</h1>

<label>Cost per kWh (₱):</label>
<input type="number" id="rate" placeholder="Example: 13">

<table>
<tr>
<th>Appliance</th>
<th>Qty</th>
<th>Hours per Day</th>
<th>Reduce Hours By</th>
</tr>

<tr>
<td>
<select id="appliance1">
<option value="">Select Appliance</option>
<option value="1000">Air Conditioner (1000W)</option>
<option value="150">Refrigerator (150W)</option>
<option value="75">Electric Fan (75W)</option>
<option value="120">LED TV (120W)</option>
<option value="1000">Rice Cooker (1000W)</option>
<option value="2000">Electric Shower (2000W)</option>
<option value="1500">Washing Machine (1500W)</option>
</select>
</td>
<td><input type="number" id="qty1" value="1"></td>
<td>
<input type="range" id="hours1" min="0" max="24" value="0" 
oninput="document.getElementById('hval1').innerText=this.value">
<span id="hval1">0</span> hrs
</td>
<td>
<input type="range" id="reduce1" min="0" max="10" value="0" 
oninput="document.getElementById('rval1').innerText=this.value">
<span id="rval1">0</span> hrs
</td>
</tr>

<tr>
<td>
<select id="appliance2">
<option value="">Select Appliance</option>
<option value="1000">Air Conditioner (1000W)</option>
<option value="150">Refrigerator (150W)</option>
<option value="75">Electric Fan (75W)</option>
<option value="120">LED TV (120W)</option>
<option value="1000">Rice Cooker (1000W)</option>
<option value="2000">Electric Shower (2000W)</option>
<option value="1500">Washing Machine (1500W)</option>
</select>
</td>
<td><input type="number" id="qty2" value="1"></td>
<td>
<input type="range" id="hours2" min="0" max="24" value="0" 
oninput="document.getElementById('hval2').innerText=this.value">
<span id="hval2">0</span> hrs
</td>
<td>
<input type="range" id="reduce2" min="0" max="10" value="0" 
oninput="document.getElementById('rval2').innerText=this.value">
<span id="rval2">0</span> hrs
</td>
</tr>

<tr>
<td>
<select id="appliance3">
<option value="">Select Appliance</option>
<option value="1000">Air Conditioner (1000W)</option>
<option value="150">Refrigerator (150W)</option>
<option value="75">Electric Fan (75W)</option>
<option value="120">LED TV (120W)</option>
<option value="1000">Rice Cooker (1000W)</option>
<option value="2000">Electric Shower (2000W)</option>
<option value="1500">Washing Machine (1500W)</option>
</select>
</td>
<td><input type="number" id="qty3" value="1"></td>
<td>
<input type="range" id="hours3" min="0" max="24" value="0" 
oninput="document.getElementById('hval3').innerText=this.value">
<span id="hval3">0</span> hrs
</td>
<td>
<input type="range" id="reduce3" min="0" max="10" value="0" 
oninput="document.getElementById('rval3').innerText=this.value">
<span id="rval3">0</span> hrs
</td>
</tr>

<tr>
<td>
<select id="appliance4">
<option value="">Select Appliance</option>
<option value="1000">Air Conditioner (1000W)</option>
<option value="150">Refrigerator (150W)</option>
<option value="75">Electric Fan (75W)</option>
<option value="120">LED TV (120W)</option>
<option value="1000">Rice Cooker (1000W)</option>
<option value="2000">Electric Shower (2000W)</option>
<option value="1500">Washing Machine (1500W)</option>
</select>
</td>
<td><input type="number" id="qty4" value="1"></td>
<td>
<input type="range" id="hours4" min="0" max="24" value="0" 
oninput="document.getElementById('hval4').innerText=this.value">
<span id="hval4">0</span> hrs
</td>
<td>
<input type="range" id="reduce4" min="0" max="10" value="0" 
oninput="document.getElementById('rval4').innerText=this.value">
<span id="rval4">0</span> hrs
</td>
</tr>

<tr>
<td>
<select id="appliance5">
<option value="">Select Appliance</option>
<option value="1000">Air Conditioner (1000W)</option>
<option value="150">Refrigerator (150W)</option>
<option value="75">Electric Fan (75W)</option>
<option value="120">LED TV (120W)</option>
<option value="1000">Rice Cooker (1000W)</option>
<option value="2000">Electric Shower (2000W)</option>
<option value="1500">Washing Machine (1500W)</option>
</select>
</td>
<td><input type="number" id="qty5" value="1"></td>
<td>
<input type="range" id="hours5" min="0" max="24" value="0" 
oninput="document.getElementById('hval5').innerText=this.value">
<span id="hval5">0</span> hrs
</td>
<td>
<input type="range" id="reduce5" min="0" max="10" value="0" 
oninput="document.getElementById('rval5').innerText=this.value">
<span id="rval5">0</span> hrs
</td>
</tr>

</table>

<button onclick="calculate()">Analyze Energy Cost</button>

<div id="results"></div>

</div>

<script>

function formatMoney(value) {
    return "₱" + value.toLocaleString("en-PH", {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
    });
}

function calculate() {

    let rate = parseFloat(document.getElementById("rate").value);
    if (!rate || rate <= 0) {
        alert("Please enter valid Cost per kWh.");
        return;
    }

    let appliances = [];
    let totalYearly = 0;
    let totalReducedYearly = 0;

    for (let i = 1; i <= 5; i++) {

        let select = document.getElementById("appliance" + i);
        let name = select.options[select.selectedIndex].text;
        let watts = parseFloat(select.value) || 0;
        let qty = parseFloat(document.getElementById("qty" + i).value) || 1;
        let hours = parseFloat(document.getElementById("hours" + i).value) || 0;
        let reduce = parseFloat(document.getElementById("reduce" + i).value) || 0;

        if (watts > 0 && hours > 0) {

            let yearlyCost = qty * (watts / 1000) * hours * 365 * rate;
            let newHours = Math.max(hours - reduce, 0);
            let reducedYearly = qty * (watts / 1000) * newHours * 365 * rate;
            let savings = yearlyCost - reducedYearly;

            totalYearly += yearlyCost;
            totalReducedYearly += reducedYearly;

            appliances.push({
                name,
                yearlyCost,
                reducedYearly,
                savings
            });
        }
    }

    if (appliances.length === 0) {
        alert("Please select at least one appliance.");
        return;
    }

    appliances.sort((a, b) => b.yearlyCost - a.yearlyCost);

    let totalMonthly = totalYearly / 12;
    let totalSavings = totalYearly - totalReducedYearly;

    let output = `
    <div class="dashboard">
        <h2>Energy Cost Dashboard</h2>
        <p><strong>Total Monthly Cost:</strong> ${formatMoney(totalMonthly)}</p>
        <p><strong>Total Yearly Cost:</strong> ${formatMoney(totalYearly)}</p>
        <p><strong>New Yearly Cost After Reductions:</strong> ${formatMoney(totalReducedYearly)}</p>
        <p><strong>Total Potential Yearly Savings:</strong> ${formatMoney(totalSavings)}</p>

        <h3>Appliance Ranking</h3>
        <table>
        <tr>
        <th>Rank</th>
        <th>Appliance</th>
        <th>Yearly</th>
        <th>Yearly After Reduction</th>
        <th>Savings</th>
        </tr>
    `;

    appliances.forEach((item, index) => {
        let highlight = index === 0 ? "class='highlight'" : "";
        output += `
        <tr ${highlight}>
            <td>${index + 1}</td>
            <td>${item.name}</td>
            <td>${formatMoney(item.yearlyCost)}</td>
            <td>${formatMoney(item.reducedYearly)}</td>
            <td>${formatMoney(item.savings)}</td>
        </tr>`;
    });

    output += `</table>
    <p><strong>Top Energy Drain:</strong> ${appliances[0].name}</p>
    </div>`;

    document.getElementById("results").innerHTML = output;
}

</script>

</body>
</html>
